<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Note</title>
    <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js'></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        var app = angular.module("note", []).controller("noteController", function ($scope,$http) {
            $scope.convertToMD = function () {
                $scope.markdown = marked.parse(document.getElementById("input").value);
                console.log($scope.markdown);
                document.getElementById("output").innerHTML = $scope.markdown;
            };
            $scope.saveForm = function () {
                $http({
                    method: 'POST',
                    url: 'http://localhost:3000/new',
                    data: $scope.note
                }).then(function (httpresponse) {
                    console.log('response:' + httpresponse);
                })
            };
        })
    </script>
</head>
<body ng-app="note" ng-controller="noteController">
    Your note title: <input type="text" name="note.title" id="note.title" ng-model="note.title">
    <h1>{{title}}</h1>
    Your note body: <br>
    <textarea name="note.body" id="note.body" cols="30" rows="10" ng-model="note.body" ng-change="convertToMD()"></textarea>
    <div id="output"></div>
</body>
</html>